#!/usr/bin/ruby

# this attempts to detect file type by extension, and if that fails checks for a shebang.

require 'optparse'
require 'ostruct'
require 'coderay'

### Options Block
Options = OpenStruct.new
Options.verbose = false

OptionParser.new do |opts|
  opts.banner = "Usage: Use ruby to cat a file and produce colored output."

  opts.on("-v", "--[no-]verbose", "Run verbosely") do |v|
    Options.verbose = v
  end
end.parse!

if ARGV.empty?
	puts 'you need to supply a list of filenames to cat to screen.'
else
	ARGV.each do |f|
		# We only want the new processed code, bam.
		puts CodeRay.scan_file(f).terminal
	end
end


