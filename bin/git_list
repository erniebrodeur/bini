#!/usr/bin/ruby
# report out if upstream (origin) has newer changes.
# make it fast.

# these are fun, give back log info condensed.
# git log --oneline ..origin/master --no-color --reverse --shortstat
# git log --oneline ..origin/master --no-color --reverse --summary

dirs = Dir.glob("/home/ebrodeur/**/.git").map {|x| x.chomp! ".git"}

def dirty?(d)
	oldpwd = Dir.pwd
	Dir.chdir d
	dirty = %x[git status --porcelain]
	Dir.chdir oldpwd
	return !dirty.empty?
end

dirs.each do |d|
	Dir.chdir d
	puts d if dirty? d
end
